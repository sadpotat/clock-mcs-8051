ORG 00H
MOV DPTR, #MYDATA

START:
MOV R0, #00H	;d0
MOV R1, #00H	;d1
MOV R2, #00H	;d2
MOV R3, #00H	;d3
MOV R4, #00H	;d4
MOV R5, #00H	;d5

DISPLAY:
ACALL SHOW

BACK:
INC R0
CJNE R0, #10D, DISPLAY	;SECOND D0
MOV R0, #0

INC R1
CJNE R1, #6D, DISPLAY	;SECOND D1
MOV R1, #0

INC R2
CJNE R2, #10D, DISPLAY	;MINUTE D0
MOV R2, #0

INC R3
CJNE R3, #6D, DISPLAY	;MINUTE D1
MOV R3, #00H

INC R4
CJNE R4, #10D, DISPLAY	;HOUR D0
MOV R4, #00H

INC R5
CJNE R5, #2D, DISPLAY	;HOUR D1

CJNE R4, #4D, DISPLAY
SJMP START	;RESET WHEN HOUR=24

SHOW:
MOV R6, #35
REPEAT:

MOV A, R0
MOVC A, @A+DPTR 
SETB P2.0	;SELECTS D0
MOV P1, A
ACALL DELAY
CLR P2.0 

MOV A, R1
MOVC A, @A+DPTR 
SETB P2.1	;SELECTS D1
MOV P1, A
ACALL DELAY
CLR P2.1

MOV A, R2
MOVC A, @A+DPTR 
SETB P2.2	;SELECTS D2
MOV P1, A
SETB P1.7	;DISPLAYS DIMPLE
ACALL DELAY
CLR P2.2 

MOV A, R3
MOVC A, @A+DPTR 
SETB P2.3	;SELECTS D3
MOV P1, A
ACALL DELAY
CLR P2.3 

MOV A, R4
MOVC A, @A+DPTR 
SETB P2.4	;SELECTS D4
MOV P1, A
SETB P1.7	;DISPLAYS DIMPLE
ACALL DELAY
CLR P2.4 

MOV A, R5
MOVC A, @A+DPTR 
SETB P2.5	;SELECTS D5
MOV P1, A
ACALL DELAY
CLR P2.5 

DJNZ R6, REPEAT
RET

DELAY:
SETB PSW.4	;SELECTS BANK2
MOV R1, #226
AGAIN1:
MOV R2, #9
AGAIN2:
DJNZ R2, AGAIN2
DJNZ R1, AGAIN1
CLR PSW.4
NOP
NOP
NOP
RET

ORG 400H
MYDATA: DB 3FH,06H,5BH,4FH,66H,6DH,7DH,07H,7FH,6FH 
END